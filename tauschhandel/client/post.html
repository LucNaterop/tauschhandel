
<template name='post'>
	{{#contentFor "headerButtonLeft"}}
		{{>ionNavBackButton path="home" text="Posts"}}
	{{/contentFor}}

	{{#ionView}}
	  {{#ionContent}}
		<div class="card">
			<div class="item item-avatar">
				<img src="http://www.femto.it/wp-content/uploads/2014/04/default-user-avatar.png">
				<h2>{{post.userName}}</h2>
				<p>{{post.dateString}}</p>
			</div>
			<div class="item item-text-wrap">
				<div id='slidebox' style='width: 100%'>
					{{#ionSlideBox}}
						{{#each post.imageIDs}}
							{{#ionSlide class='light-bg'}}
								<img src="http://i.imgur.com/{{this}}l.jpg" width='100%'>
							{{/ionSlide}}
						{{/each}}
				     {{/ionSlideBox}}
				</div>
				<br>
				<p>{{post.text}}</p>
				<br>
				<p>tags: {{#each post.tags}} {{this}} {{/each}}</p>
				<br>
			</div>
			{{#unless isMyPost}}
				<div class="item tabs tabs-secondary tabs-icon-left">
						<a id="like" class="tab-item" href="#" style='{{#if hasInterest }}color: red {{/if}}'>
					      <i class="icon ion-android-favorite"></i>
					      Like
						</a>
					<a class="tab-item" href="#">
						<i class="icon ion-chatbubble"></i>
						Q&A
					</a>
					<a class="tab-item" href="#">
						<i class="icon ion-share"></i>
						Share
					</a>
				</div>
			{{/unless}}
		</div>
		{{#if isMyPost}}
			{{#if esHatInteressenten}}
				{{> giveAway}}
			{{/if}}
		{{/if}}

	  {{/ionContent}}
	{{/ionView}}
</template>

<template name="giveAway">
	<div class="card">
		<div class="item item-divider">
			An jemanden vergeben
		</div>
		<div class="item item-text-wrap">
			{{#if post.vergebenAn}}
				<p>Wurde vergeben an <b>{{post.vergebenAnName}}</b></p>
				<button id="revert" class="button button-block button-outline button-assertive">
					Rückgängig machen
				</button>
			{{else}}
				<p>Bitte wähle einen Interessenten aus.</p>
				<div class="list">
					<label class="item item-input item-select">
						<div class="input-label">
							User
						</div>
						<select>
							{{#each interessenten}}
								<option value="{{_id}}">{{username}}</option>
							{{/each}}
						</select>
					</label>
				</div>
				<button id="giveAway" class="button button-block button-outline button-assertive">
					Dieser Person geben
				</button>
			{{/if}}
		</div>
	</div>
</template>


<template name="interessent">
	<button class='btn btn-default'>{{this}}</button> <br>
</template>

<template name="discussion">
	{{#if previewMode}}
	{{else}}
		{{#each discussions}}
			{{> discussionPair}}
		{{/each}}
	{{/if}}

	{{#if isMyPost}}
	{{else}}
		{{> createPostQuestion}}
	{{/if}}
</template>


<template name="discussionPair">
	<div class="panel panel-success">
		<div class="panel-heading"><label>Frage:</label><br> {{question}}
			<div class="panel-body">
				{{#if answer}}
					<label>Antwort: </label><br> {{answer}}
				{{else}}
					{{#if isMyPost}}
						<form role='form'>
							<label>Antwort: </label><br> <input id='antwort' class='form-control' type="text" placeholder="Antwort">
						</form>
					{{else}}
						<p>Noch keine Antwort</p>
					{{/if}}
				{{/if}}
			</div>
		</div>

	</div>
</template>

<template name='createPostQuestion'>
	<form role='form'>
		<div class="input-group">
		<label class="item item-input">
			<textarea id='text' placeholder="Comments"></textarea>
		</label>
		<label class="item item-input">
			<button id='submitButton' class="button button-positive button-outline" type="button">Frage stellen!</button>
		</label>
		</div>
	</form>
</template>